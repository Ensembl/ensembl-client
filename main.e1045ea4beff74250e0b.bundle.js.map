{"version":3,"file":"main.e1045ea4beff74250e0b.bundle.js","sources":["webpack:///./src/content/app/species-selector/components/strain-selector/StrainSelector.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport classNames from 'classnames';\n\nimport Dropdown from 'src/shared/dropdown/Dropdown';\n\nimport styles from './StrainSelector.scss';\n\nexport type Strain = {\n  name: string;\n  isSelected: boolean;\n};\n\ntype OnSelect = (strainName: string) => void;\n\ntype StrainSelectorProps = {\n  strains: Strain[];\n  onSelect: OnSelect;\n};\n\ntype StrainProps = Strain & {\n  onSelect: OnSelect;\n};\n\nconst StrainSelector = (props: StrainSelectorProps) => {\n  const [isDropdownVisible, setDropdownVisibility] = useState(false);\n  const elementRef: React.RefObject<HTMLDivElement> = useRef(null);\n\n  const numberOfSelectedStrains = props.strains.reduce(\n    (sum, { isSelected }) => {\n      return isSelected ? sum + 1 : sum;\n    },\n    0\n  );\n  const totalNumberOfStrains = props.strains.length;\n\n  const toggleDropdownVisibility = () => {\n    setDropdownVisibility(!isDropdownVisible);\n  };\n  const hideDropdown = () => setDropdownVisibility(false);\n\n  return (\n    <div\n      className={styles.strainSelector}\n      onClick={toggleDropdownVisibility}\n      ref={elementRef}\n    >\n      {numberOfSelectedStrains} / {totalNumberOfStrains}\n      {isDropdownVisible && (\n        <Dropdown onClose={hideDropdown} verticalOffset={-5}>\n          <StrainsList {...props} />\n        </Dropdown>\n      )}\n    </div>\n  );\n};\n\nconst StrainsList = (props: StrainSelectorProps) => {\n  const strains = props.strains.map((strain) => (\n    <Strain key={strain.name} {...strain} onSelect={props.onSelect} />\n  ));\n\n  return <div className={styles.strainsList}>{strains}</div>;\n};\n\nconst Strain = (props: StrainProps) => {\n  const className = classNames(styles.strain, {\n    [styles.strainSelected]: props.isSelected\n  });\n  const onClick = () => {\n    if (!props.isSelected) {\n      props.onSelect(props.name);\n    }\n  };\n\n  return (\n    <div className={className} onClick={onClick}>\n      {props.name}\n    </div>\n  );\n};\n\nexport default StrainSelector;\n"],"mappings":"AAuBA","sourceRoot":""}