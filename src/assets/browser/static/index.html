<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>stdweb â€¢ WebGL</title>
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
	</head>
	<body style="height: 100vh; padding: 0; margin: 0;">
        <div style="display: none; font: 'Lato';">preload</div>
        <main id="main" style="height: 100vh;">
            <div id="stage"></div>
        </main>
		<script src="hellostdweb.js"></script>
        <script>
            function startup_mutate(mutations,observer) {
                var ready = false;
                for(var mutation of mutations) {
                    for(var klass of mutation.target.classList) {
                        if(klass == 'browser-app-ready') {
                            ready = true;
                        }
                    }
                }
                if(ready) {
                    console.log("activate",mutation.target);
                    mutation.target.dispatchEvent(
                        new CustomEvent("bpane-activate",{
                            detail: {
                                key: 'main'
                            },
                            bubbles: true
                        })
                    );
                }
            }
            
            var observer = new MutationObserver(startup_mutate);
            observer.observe(document.getElementsByTagName("body")[0],{ attributes: true });
        </script>
	</body>
</html>
